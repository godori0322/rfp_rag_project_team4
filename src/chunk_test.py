from document import chunk
from config import Config  
import os               

# í…ŒìŠ¤íŠ¸ ì½”ë“œ
# í•´ë‹¹ íŒŒì¼ì—ì„œ HWP ì›ë³¸ íŒŒì¼ì—ì„œëŠ” í…ìŠ¤íŠ¸ë¡œ ì¸ì‹ë˜ëŠ” ë¶€ë¶„ì´ PDF ë³€í™˜ ì‹œ ì´ë¯¸ì§€ë¡œ ë³€í™˜ë˜ëŠ” ë¬¸ì œ ìˆìŒ. 

# ì œëª© í…ìŠ¤íŠ¸ ì¶”ì¶œì´ ì•ˆë˜ëŠ” íŒŒì¼

## (ì‚¬)ë²¤ì²˜ê¸°ì—…í˜‘íšŒ_2024ë…„ ë²¤ì²˜í™•ì¸ì¢…í•©ê´€ë¦¬ì‹œìŠ¤í…œ ê¸°ëŠ¥ ê³ ë„í™” ìš©ì—­ì‚¬ì—… .pdf

# ê²€ìƒ‰ì´ ì•ˆë˜ëŠ” íŒŒì¼

## ì¼€ë¹ˆë© ì£¼ì‹íšŒì‚¬_í‰íƒì‹œ ê°•ì†Œí˜• ìŠ¤ë§ˆíŠ¸ì‹œí‹° AI ê¸°ë°˜ì˜ ì˜ìƒê°ì‹œ ì‹œìŠ¤í…œ .pdf (ì§ˆë¬¸: ì¼€ë¹ˆë© ì£¼ì‹íšŒì‚¬ê°€ ì§„í–‰í•˜ëŠ” ì‚¬ì—…ì— ëŒ€í•´ ì•Œë ¤ì¤˜.)

filename = "ì¼€ë¹ˆë© ì£¼ì‹íšŒì‚¬_í‰íƒì‹œ ê°•ì†Œí˜• ìŠ¤ë§ˆíŠ¸ì‹œí‹° AI ê¸°ë°˜ì˜ ì˜ìƒê°ì‹œ ì‹œìŠ¤í…œ .pdf"

# Configë¥¼ ì‚¬ìš©í•˜ì—¬ PDF íŒŒì¼ì˜ ì „ì²´ ê²½ë¡œ ìƒì„±
# load_documents í•¨ìˆ˜ì™€ ë™ì¼í•œ ë°©ì‹
file_full_path = os.path.join(Config.PDF_PATH, filename)


if __name__ == "__main__":
    # chunk í•¨ìˆ˜ì— íŒŒì¼ ì´ë¦„(filename) ëŒ€ì‹  ì „ì²´ ê²½ë¡œ(file_full_path)ë¥¼ ì „ë‹¬
    
    result = chunk(file_full_path, metadata={})
    cnt = 1
    
    # í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ í”„ë¦°íŠ¸ë¬¸ ê°™ì´ ì¶œë ¥
    print(f"'{filename}' íŒŒì¼ì— ëŒ€í•œ ì²­í‚¹ ê²°ê³¼:")
    print(f"ğŸ‰ ì´ {len(result)}ê°œì˜ ì²­í¬ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.\n")
    for r in result:
        print(f"---- {cnt}ë²ˆì§¸ chunk ----")
        
        # í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ë©”íƒ€ë°ì´í„°ì— ì¶”ê°€ëœ parent_headerë„ í•¨ê»˜ ì¶œë ¥
        print(f"Parent Header: {r.metadata.get('parent_header', 'N/A')}") 
        print(r.page_content)
        cnt += 1
        if cnt > 30:
            break